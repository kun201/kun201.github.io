---
title: 学习awk和printf的小粗心事件记录
date: 2018-12-20 21:50:06
thumbnail:
categories: [Linux]
tags: [随笔,粗心的我]
---

&emsp;&emsp;今天在学习学习使用printf和awk时候碰到了一个小问题，执行一段命令一直出错，该段命令如下：
```
cat pay.txt | \ 
awk 'NR==1{printf "%10s %10s %10s %10s %10s\n",$1,$2,$3,$4,"Total"} \
NR>1{total=$2+$3+$4 \
printf "%10s %10d %10d %10d %10.2f\n",$1,$2,$3,$4,total}'
#以上是代码，以下是报错信息
awk: cmd. line:3: printf "%10s %10d %10d %10d %10.2f\n",$1,$2,$3,$4,total}
awk: cmd. line:3: ^ syntax error
```
&emsp;&emsp;不知道看到这里的朋友是不是能快速的发现问题所在，如果不能的话，那么就请继续看接下来的内容。<!-- more -->
&emsp;&emsp;**所有awk的操作，亦即在{}内的操作，如果有需要多个命令辅助时，可利用分号【;】间隔，或直接以【Enter】按键来隔开每个命令。**也就是说'printf "%10s...'的上面那段不能以【\】结尾，因为shell会将其认为是同一行的代码，解决方案就是去掉结尾的【\】直接换行，或者将【\】结尾改为【;\】结尾，正确的方式如下：
```
#方式一：去掉【\】直接进行换行
cat pay.txt | \ 
awk 'NR==1{printf "%10s %10s %10s %10s %10s\n",$1,$2,$3,$4,"Total"} \
NR>1{total=$2+$3+$4    #已经去掉了之前的【\】
printf "%10s %10d %10d %10d %10.2f\n",$1,$2,$3,$4,total}'

#方式二：将【\】结尾改为【;\】结尾
cat pay.txt | \ 
awk 'NR==1{printf "%10s %10s %10s %10s %10s\n",$1,$2,$3,$4,"Total"} \
NR>1{total=$2+$3+$4; \    #在【\】前面添加一个分号
printf "%10s %10d %10d %10d %10.2f\n",$1,$2,$3,$4,total}'
```
&emsp;&emsp;这样shell就可以正确的执行啦，希望大家不要像我一样，被这样的小问题给耽误了足足十几分钟(以为是代码写错了，不断地重复敲击)。没办法，我就是这样一个追根刨底的人，但是却没有向前看(因为就在这个小练习的下面一点就有说明...)。所以我将这个记录下来，也是希望我以后能够时刻谨记，要细心、往长远的看，同时我也希望同样碰到这个问题的朋友，能够快速的找到问题所在。

## 参考 #
《鸟哥的Linux私房菜》
